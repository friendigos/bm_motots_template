(self.webpackChunkre_wire=self.webpackChunkre_wire||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},3983:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var s=r(529),i=r(5366);let o=(()=>{class e{constructor(){this.apiUrlList=[{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/refresh_token/",id:"refreshToken"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/login/",id:"login"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/registration/",id:"register"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/validate/",id:"validateUserInputs"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/send_otp/",id:"sendOTP"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/login_send_otp/",id:"keyclock_sendotp"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/login_verify_otp/",id:"keyclock_verifyotp"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/reset_password/",id:"resetPassword"},{apiUrl:s.N.httpPort+s.N.apiVersion+"account/update_email/",id:"updateEmailId"},{apiUrl:s.N.httpPort+s.N.apiVersion+"account/profile/",id:"profile"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/send_enquiry/",id:"contactUs"},{apiUrl:s.N.httpPort+s.N.apiVersion+"account/notifications/",id:"notifications"},{apiUrl:s.N.httpPort+s.N.apiVersion+"account/change_password/",id:"changePassword"},{apiUrl:s.N.httpPort+s.N.apiVersion+"deal/calculate_price_range/",id:"dealPrice"},{apiUrl:s.N.httpPort+s.N.apiVersion+"deal/user_interest/",id:"userIntrest"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/dropdown/",id:"dropdown"},{apiUrl:s.N.httpPort+s.N.apiVersion+"deal/get_user_vehicle_list/",id:"userVehicleList"},{apiUrl:s.N.httpPort+s.N.apiVersion+"deal/insert_vehicle_address/",id:"addAddress"},{apiUrl:s.N.httpPort+s.N.apiVersion+"deal/add_bank_details/",id:"addBankDetails"},{apiUrl:s.N.httpPort+s.N.apiVersion+"no_auth/check_dealer/",id:"checkDealer"},{apiUrl:s.N.httpPort+s.N.apiVersion+"account/logout/",id:"logout"}]}returnAPI(e){return this.apiUrlList.find(t=>t.id===e).apiUrl}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},436:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var s=r(7425),i=r(5366);let o=(()=>{class e{constructor(){this.isLoggedIn=new s.X(!1),this.isUserDetailsUpdated=new s.X(!1),this.estimationData=new s.X(null),this.estimationDataEdit=new s.X(null),this.dashboardFilter=new s.X(null),this.addressDataChange=new s.X(null),this.bankDataChange=new s.X(null),this.freeSearchTokenUpdated=new s.X(null),this.userLoggedOut=new s.X(!1),this.userLoggedIn=new s.X(!1),this.isLoggedIn=new s.X(!1),this.isUserDetailsUpdated=new s.X(!1),this.estimationData=new s.X(null),this.estimationDataEdit=new s.X(null),this.addressDataChange=new s.X(null),this.bankDataChange=new s.X(null),this.dashboardFilter=new s.X(null),this.freeSearchTokenUpdated=new s.X(null),this.userLoggedOut=new s.X(!1),this.userLoggedIn=new s.X(!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2181:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});var s=r(5366),i=r(5908);let o=(()=>{class e{constructor(e,t,r){this.req=e,this.res=t,this.platformId=r,this.cookies={},this.setCookies={},this.document={cookie:""},null!==this.req&&this.req.headers?this.cookies=this.req.headers.cookie:this.document=document}getServerUrl(){return document.location.hostname}getItem(e){if(null==this.cookies||null==this.cookies)return null;const t=this._getPairs();return e&&void 0!==t&&void 0!==typeof t[e]&&void 0!==t[e]?null==t[e]||null==t[e]||""==t[e]?null:t[e]:null}setItem(e,t,r,s){if(!e)return!1;if(s||(s="/"),null===this.req){let i="";r&&(r instanceof Date||(r=new Date(r)),i="; expires="+r.toUTCString()),this.document.cookie=`${e}=${t}${i}; path=${s}; Secure;SameSite=None`}else if(r){r instanceof Date||(r=new Date(r));const i=new Date;r.getTime()<=i.getTime()?this.removeItem(e,s):this.res.cookie(e,t,{expires:r,path:s,encode:String})}else this.res.cookie(e,t,{path:s,encode:String});return!0}removeItem(e,t){return!(null!==this.req||!e||(t||(t="/"),null===this.req?this.document.cookie=`${e}=;path=${t}`:(this.cookies[e]=null,this.res.cookie(e,null,{path:t,encode:String})),0))}_getPairs(){if(null===this.req){const e=this.document.cookie.split("; "),t={};return e.forEach(e=>{if(e){let r=e.indexOf("="),s=e.slice(r+1);const i=e.split("=",1);i.push(s),t[i[0]]=void 0!==i[1]?i[1]:null}}),t}{const e=this.cookies.split("; "),t={};return e.forEach(e=>{if(e){let r=e.indexOf("="),s=e.slice(r+1);const i=e.split("=",1);i.push(s),t[i[0]]=void 0!==i[1]?i[1]:null}}),t}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(i.Z,8),s.LFG(i.Y,8),s.LFG(s.Lbi))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3964:(e,t,r)=>{"use strict";r.d(t,{D:()=>h});var s=r(6304),i=r(9647),o=r(1816),n=r(529),a=r(5366),c=r(2693),l=r(1178);let h=(()=>{class e{constructor(e,t){this.http=e,this.spinnerService=t}post(e,t){return this.http.post(e,t).pipe((0,o.K)(this.handlError))}getGeoLocation(e){var t=this;return(0,s.Z)(function*(){return yield t.http.get(`${n.N.locationPort}`,{params:e}).toPromise().then(e=>e)})()}loginUserViaKeyClock(e){var t=this;return(0,s.Z)(function*(){return yield t.http.post(n.N.httpPort+n.N.apiVersion+"no_auth/login_verify_otp/",e).toPromise().then(e=>e).catch(e=>e)})()}handlError(e){return(0,i._)(e)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(c.eN),a.LFG(l.t2))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},741:(e,t,r)=>{"use strict";r.d(t,{F:()=>h});var s=r(5366),i=r(90),o=r(436),n=r(6190),a=r(1251),c=r(5998),l=r(2181);let h=(()=>{class e{constructor(e,t,r,s,i,o,n){this.snackBar=e,this.behaviorService=t,this.rootService=r,this.router=s,this.localStorage=i,this.ssrcookieService=o,this.platformId=n}afterLogin(e,t){let r=e.data,s=e.data.token;this.userdetails={keycloak_user_id:r.keycloak_user_id,email_id:r.email_id,first_name:r.first_name,middle_name:r.middle_name,last_name:r.last_name,phone_number:r.phone_number,is_email_exist:r.is_email_exist,userid:r.id},this.usertoken={access_token:s.access_token,expires_in:s.expires_in,refresh_token:s.refresh_token,refresh_expires_in:s.refresh_expires_in},this.user_code={user_code:r.user_code,isLoggedIn:t},this.rootService.setToken(this.usertoken),this.rootService.setUserCode(this.user_code),t&&(this.rootService.setUserData(this.userdetails),this.router.navigateByUrl("/dashboard"),this.behaviorService.isLoggedIn.next(!0))}logout(){this.ssrcookieService.removeItem("isuserLoggedIn"),this.ssrcookieService.removeItem("access_token"),this.ssrcookieService.removeItem("ref_token"),this.behaviorService.isLoggedIn.next(!1),this.behaviorService.userLoggedOut.next(!0),this.localStorage.clear()}failedSnackBarResponse(e){this.snackBar.open(e,"",{duration:5e3,panelClass:["custom-styleRed"],verticalPosition:"bottom",horizontalPosition:"center"})}successSnackBarResponse(e){this.snackBar.open(e,"",{duration:5e3,panelClass:["custom-style"],verticalPosition:"bottom",horizontalPosition:"center"})}getOwners(e){if(e>3&&e<21)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(i.ux),s.LFG(o.m),s.LFG(n.i),s.LFG(a.F0),s.LFG(c.p),s.LFG(l.N),s.LFG(s.Lbi))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3903:(e,t,r)=>{"use strict";r.d(t,{a:()=>l});var s=r(5366),i=r(1251),o=r(6190),n=r(2181),a=r(436),c=r(334);let l=(()=>{class e{constructor(e,t,r,s,i,o,n){this.activatedRoute=e,this.router=t,this.rootService=r,this.ssrcookieService=s,this.behaviorService=i,this.platformId=o,this.auth=n}canActivate(e,t){return!this.auth.isLoggedIn()||(this.router.navigateByUrl("/dashboard"),!1)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(i.gz),s.LFG(i.F0),s.LFG(o.i),s.LFG(n.N),s.LFG(a.m),s.LFG(s.Lbi),s.LFG(c.e))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})()},334:(e,t,r)=>{"use strict";r.d(t,{e:()=>n});var s=r(5366),i=r(5998),o=r(6190);let n=(()=>{class e{constructor(e,t){this.localStorage=e,this.rootService=t}isLoggedIn(){return!!this.rootService.isUserLoggedIn()}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(i.p),s.LFG(o.i))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3571:(e,t,r)=>{"use strict";r.d(t,{p:()=>h});var s=r(5366),i=r(1251),o=r(6190),n=r(2181),a=r(436),c=r(5998),l=r(334);let h=(()=>{class e{constructor(e,t,r,s,i,o,n,a){this.activatedRoute=e,this.router=t,this.rootService=r,this.ssrcookieService=s,this.behaviorService=i,this.platformId=o,this.localStorage=n,this.auth=a}canActivate(e,t){return!!this.rootService.isUserLoggedIn()||(this.router.navigateByUrl(""),!1)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(i.gz),s.LFG(i.F0),s.LFG(o.i),s.LFG(n.N),s.LFG(a.m),s.LFG(s.Lbi),s.LFG(c.p),s.LFG(l.e))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})()},6190:(e,t,r)=>{"use strict";r.d(t,{i:()=>f});var s=r(1116),i=r(2693),o=r(5366),n=r(343),a=r(529),c=r(2181),l=r(436),h=r(1251),d=r(3983),u=r(3964),p=r(5998);let f=(()=>{class e{constructor(e,t,r,s,o,n,a,c){this.ssrcookieService=e,this.behaviorService=t,this.router=r,this.apiList=s,this.dataService=o,this.localStorage=n,this.http=a,this.platformId=c,this.showServicecall=!1,this.options={headers:new i.WM({"Content-Type":"application/json","request-id":"b997a77ae2b3f30c1bed151c3e42434f"})}}upgradeVersion(){if((0,s.NF)(this.platformId)){const e=null==a.N?void 0:a.N.version;void 0!==localStorage.APP_VERSION&&null!==localStorage.APP_VERSION||(localStorage.clear(),this.deleteCookies(),localStorage.setItem("APP_VERSION",e)),localStorage.APP_VERSION!=e&&(localStorage.clear(),this.deleteCookies(),localStorage.setItem("APP_VERSION",e))}}deleteCookies(){this.ssrcookieService.removeItem("access_token"),this.ssrcookieService.removeItem("ref_token"),this.ssrcookieService.removeItem("free_access_token"),this.ssrcookieService.removeItem("free_ref_token")}isUserLoggedIn(){let e=this.ssrcookieService.getItem("isuserLoggedIn")?this.ssrcookieService.getItem("isuserLoggedIn"):null;return 0!=e&&"false"!=e&&(1==e||"true"==e||e)||!1}setUserCode(e){this.localStorage.setItem("userCode",JSON.stringify(e)),this.ssrcookieService.setItem("isuserLoggedIn",e.isLoggedIn)}getUserCode(){var e;return null===(e=JSON.parse(this.localStorage.getItem("userCode")))||void 0===e?void 0:e.user_code}getAccessToken(){return null!=this.ssrcookieService.getItem("access_token")}getRefreshToken(){return this.ssrcookieService.getItem("ref_token")}setToken(e){let t=new Date,r=1e3*e.expires_in;var s=r-r/10;let i=new Date(t.getTime()+s),o=1e3*e.refresh_expires_in;var n=o-o/10;new Date(t.getTime()+n),this.ssrcookieService.setItem("access_token",e.access_token,i),this.ssrcookieService.setItem("ref_token",e.refresh_token)}setUserData(e){this.localStorage.setItem("userData",JSON.stringify(e))}getUserData(){return JSON.parse(this.localStorage.getItem("userData"))}refreshToken(){let e={refresh_token:this.ssrcookieService.getItem("ref_token")?this.ssrcookieService.getItem("ref_token"):""},t=this.apiList.returnAPI("refreshToken");return this.dataService.post(t,e).pipe((0,n.b)(e=>{e.success&&this.setToken(e.data)}))}refreshToken2(){let e={};return e={refresh_token:this.ssrcookieService.getItem("free_ref_token")?this.ssrcookieService.getItem("free_ref_token"):this.localStorage.getItem("free_ref_token")},this.showServicecall=!0,this.http.post(`${a.N.freeSearchPort}token/refresh/`,e,this.options).toPromise().then(e=>{this.showServicecall=!1,!0===e.success&&(this.localStorage.setItem("FreeRefreshTokenInProgress","false"),this.storeJwtToken(e))}).catch(e=>{})}getFreeSearchToken(){return this.showServicecall=!0,this.http.post(`${a.N.freeSearchPort}`,{device_id:"112555992817800560000mMRnJcOCz4"},this.options).toPromise().then(e=>{if(e){this.showServicecall=!1,this.expiredDate=new Date;let r=1e3*e.data.expires_in;var t=r-r/10;let s=new Date(this.expiredDate.getTime()+t);this.ssrcookieService.setItem("free_access_token",e.data.access_token,s),this.ssrcookieService.setItem("free_ref_token",e.data.refresh_token),this.localStorage.setItem("free_ref_token",e.data.refresh_token),this.localStorage.setItem("FreeRefreshTokenInProgress","false"),this.behaviorService.freeSearchTokenUpdated.next(!0)}})}storeJwtToken(e){if(!0===e.success){this.expiredDate=new Date;let r=1e3*e.data.expires_in;var t=r-r/10;let s=new Date(this.expiredDate.getTime()+t);this.ssrcookieService.setItem("free_access_token",e.data.access_token,s),this.ssrcookieService.setItem("free_ref_token",e.data.refresh_token),this.localStorage.setItem("free_ref_token",e.data.refresh_token),this.localStorage.setItem("FreeRefreshTokenInProgress","false"),this.behaviorService.freeSearchTokenUpdated.next(!0)}}checkRoutes(){this.behaviorService.isLoggedIn.subscribe(e=>{var t,r,s,i,o,n;this.isUserLoggedIn()||((null===(t=this.router.url)||void 0===t?void 0:t.includes("notifications"))||(null===(r=this.router.url)||void 0===r?void 0:r.includes("dashboard"))||(null===(s=this.router.url)||void 0===s?void 0:s.includes("add-vehicle"))||(null===(i=this.router.url)||void 0===i?void 0:i.includes("change-password"))||(null===(o=this.router.url)||void 0===o?void 0:o.includes("estimation"))||(null===(n=this.router.url)||void 0===n?void 0:n.includes("profile")))&&this.router.navigateByUrl("/login")})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(c.N),o.LFG(l.m),o.LFG(h.F0),o.LFG(d.a),o.LFG(u.D),o.LFG(p.p),o.LFG(i.eN),o.LFG(o.Lbi))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5998:(e,t,r)=>{"use strict";r.d(t,{p:()=>h});var s=r(5366),i=r(1116),o=r(529),n=r(436),a=r(1251),c="chair@rewire$9876",l=r(5595);let h=(()=>{class e{constructor(e,t,r){this.behaviorService=e,this.platformId=t,this.router=r}setItem(e,t){if((0,i.NF)(this.platformId)){let r=l.AES.encrypt(t,c);return localStorage.setItem(e,r.toString()),null}return null}getItem(e){if((0,i.NF)(this.platformId)){let t=localStorage.getItem(e);if(t){let e=l.AES.decrypt(t,c);return e=e.toString(l.enc.Utf8),e}return null}return null}clear(){(0,i.NF)(this.platformId)&&(localStorage.clear(),this.router.navigateByUrl(""),window.location.reload())}encryptData(e){var t=o.N.rewire_sugar,r=l.enc.Utf8.parse(o.N.rewire_salt),s=l.enc.Utf8.parse(t);return l.AES.encrypt(e,s,{iv:r}).toString()}decryptData(e){var t=o.N.rewire_sugar,r=l.enc.Utf8.parse(o.N.rewire_salt),s=l.enc.Utf8.parse(t);return l.AES.decrypt(e,s,{iv:r}).toString(l.enc.Utf8)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(n.m),s.LFG(s.Lbi),s.LFG(a.F0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},529:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});const s={httpPort:"https://mobility-cv-prod-microservices.api.tatamotors",baseUrl:"https://rewire.tatamotors.com/",rewire_sugar:"w9z$C&E)H@McQfTjWnZr4u7x!A%D*G-J",rewire_salt:"6v9y$B&E)H@McQfT",locationPort:"https://digital-edukaan-cv-prod-ms.api.tatamotors/api/v2/ecom/search/geo_dropdowns/",freeSearchPort:"https://digital-edukaan-cv-prod-ms.api.tatamotors/api/v1/ecom/FreeSearchTokenRequest/",apiVersion:"/api/v1/rvsf/",version:r(306).i8,production:!0}},6411:(e,t,r)=>{"use strict";var s=r(9624),i=r(5366),o=r(2693),n=r(1251);const a=[{path:"",loadChildren:()=>r.e(416).then(r.bind(r,3416)).then(e=>e.LayoutModule)}];let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.Bz.forRoot(a,{anchorScrolling:"enabled",scrollPositionRestoration:"enabled",onSameUrlNavigation:"reload",initialNavigation:"enabled"})],n.Bz]}),e})();var l=r(1178);let h=(()=>{class e{constructor(){this.title="reWire"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-root"]],decls:2,vars:1,consts:[["bdColor","rgba(0, 0, 0, 0.4)","size","medium","color","#fff","type","ball-pulse",3,"fullScreen"]],template:function(e,t){1&e&&(i._UZ(0,"ngx-spinner",0),i._UZ(1,"router-outlet")),2&e&&i.Q6J("fullScreen",!0)},directives:[l.Ro,n.lC],styles:[".la-ball-pulse[_ngcontent-%COMP%], .la-ball-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.la-ball-pulse[_ngcontent-%COMP%]{display:block;font-size:0;color:#fff}.la-ball-pulse.la-dark[_ngcontent-%COMP%]{color:#333}.la-ball-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block;float:none;background-color:currentColor;border:0 solid}.la-ball-pulse[_ngcontent-%COMP%]{width:54px;height:18px}.la-ball-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{animation-delay:-.2s}.la-ball-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.1s}.la-ball-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){animation-delay:0ms}.la-ball-pulse[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:10px;height:10px;margin:4px;border-radius:100%;animation:ball-pulse 1s ease infinite}.la-ball-pulse.la-sm[_ngcontent-%COMP%]{width:26px;height:8px}.la-ball-pulse.la-sm[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:4px;height:4px;margin:2px}.la-ball-pulse.la-2x[_ngcontent-%COMP%]{width:108px;height:36px}.la-ball-pulse.la-2x[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:20px;height:20px;margin:8px}.la-ball-pulse.la-3x[_ngcontent-%COMP%]{width:162px;height:54px}.la-ball-pulse.la-3x[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:30px;height:30px;margin:12px}@keyframes ball-pulse{0%,60%,to{opacity:1;transform:scale(1)}30%{opacity:.1;transform:scale(.01)}}  .ngx-spinner-overlay{z-index:100000!important}"]}),e})();var d=r(1116),u=r(7425),p=r(9647),f=r(1816),g=r(4324),k=r(8868),v=r(9056),_=r(5998),m=r(741),S=r(6190),I=r(2181),w=r(436);let P=(()=>{class e{constructor(e,t,r,s,i,o){this.localStorage=e,this.sharedService=t,this.rootService=r,this.ssrcookieService=s,this.behaviorService=i,this.platformId=o,this.isRefreshing=!1,this.refreshTokenSubject=new u.X(null),this.isLoggedIn=!1,this.FreeTokenInProgress=!1,this.FreeTokenSubject=new u.X(null),this.FreeRefreshTokenInProgress=!1,this.FreeRefreshTokenSubject=new u.X(null)}injectToken(e){const t=this.rootService.getUserCode()?this.rootService.getUserCode():null,r=this.ssrcookieService.getItem("access_token")?this.ssrcookieService.getItem("access_token"):null;return this.behaviorService.freeSearchTokenUpdated.subscribe(e=>{this.freeaccessToken=this.ssrcookieService.getItem("free_access_token")?this.ssrcookieService.getItem("free_access_token"):null,this.freerefreshToken=this.ssrcookieService.getItem("free_ref_token")?this.ssrcookieService.getItem("free_ref_token"):this.localStorage.getItem("free_ref_token")}),e.url.includes("geo_dropdown")||e.url.includes("FreeSearchTokenRequest")?this.freeaccessToken&&this.freerefreshToken?e.clone({setHeaders:{Authorization:`Bearer ${this.freeaccessToken}`}}):e:r&&t?e.clone({setHeaders:{"user-code":t,Authorization:`Bearer ${r}`}}):e}intercept(e,t){if(-1!==e.url.indexOf("refresh"))return t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError));const r=this.ssrcookieService.getItem("access_token")?this.ssrcookieService.getItem("access_token"):null,s=this.ssrcookieService.getItem("ref_token")?this.ssrcookieService.getItem("ref_token"):null,i=this.ssrcookieService.getItem("free_access_token")?this.ssrcookieService.getItem("free_access_token"):null,o=this.ssrcookieService.getItem("free_ref_token")?this.ssrcookieService.getItem("free_ref_token"):this.localStorage.getItem("free_ref_token");if(e.url.includes("geo_dropdown")||e.url.includes("FreeSearchTokenRequest")){if(i&&o)return t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError));if(!i&&!o)if(this.FreeTokenInProgress)if(this.isLoggedIn=this.rootService.isUserLoggedIn(),this.isLoggedIn){if(this.FreeRefreshTokenInProgress)i||"true"!=this.localStorage.getItem("FreeRefreshTokenInProgress")&&(this.localStorage.setItem("FreeRefreshTokenInProgress","true"),this.rootService.refreshToken2());else if(this.FreeRefreshTokenInProgress=!0,this.FreeRefreshTokenSubject.next(null),!i&&"true"!=this.localStorage.getItem("FreeRefreshTokenInProgress"))return this.localStorage.setItem("FreeRefreshTokenInProgress","true"),this.rootService.refreshToken2().pipe((0,g.w)(r=>(r&&(this.FreeRefreshTokenInProgress=!1),this.FreeRefreshTokenSubject.next(r.data.refresh_token),t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError)))))}else(0,d.NF)(this.platformId)&&window.location.reload();else this.FreeTokenInProgress=!0,this.FreeTokenSubject.next(null);if(!i&&o){if(this.FreeRefreshTokenInProgress)return this.FreeRefreshTokenSubject.pipe((0,k.h)(e=>null!==e),(0,v.q)(1),(0,g.w)(r=>t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError))));if(this.FreeRefreshTokenInProgress=!0,this.FreeRefreshTokenSubject.next(null),!i&&"true"!=this.localStorage.getItem("FreeRefreshTokenInProgress"))return this.localStorage.setItem("FreeRefreshTokenInProgress","true"),this.rootService.refreshToken2().pipe((0,g.w)(r=>(r&&(this.FreeRefreshTokenInProgress=!1),this.FreeRefreshTokenSubject.next(r.data.refresh_token),t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError)))))}if(!i)return t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError))}else{if(r&&s)return t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError));if(!r&&!s){if(!this.rootService.isUserLoggedIn())return t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError));this.sharedService.logout()}if(!r&&s)return this.isRefreshing?this.refreshTokenSubject.pipe((0,k.h)(e=>null!==e),(0,v.q)(1),(0,g.w)(r=>t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError)))):(this.isRefreshing=!0,this.refreshTokenSubject.next(null),this.rootService.refreshToken().pipe((0,g.w)(r=>(this.isRefreshing=!1,this.refreshTokenSubject.next(r.data.refresh_token),t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError))))));if(!r)return t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError))}return t.handle(this.injectToken(e)).pipe((0,f.K)(this.handleError))}handleError(e){let t={};return t={msg:e&&e.error&&e.error.data?e.error.data.msg:e&&e.error&&"<h1>403 Forbidden</h1>"==e.error?"Something went wrong, Please try again !":e,status:e.status,apierror:e,netWorkStatus:!0},0===e.status||500===e.status?(t.msg="Something went wrong, Please try again !",(0,p._)(t)):(t.netWorkStatus||(t.msg="You are Offline.Please check the network connectivity"),(0,p._)(t))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(_.p),i.LFG(m.F),i.LFG(S.i),i.LFG(I.N),i.LFG(w.m),i.LFG(i.Lbi))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var F=r(1041);let L=(()=>{class e{constructor(e,t,r,s){this.router=e,this.sharedService=t,this.rootService=r,this.platformId=s,this.errorMsg="Something went wrong, Please try again !"}intercept(e,t){return t.handle(e).pipe((0,f.K)(t=>this.handleError(t,e)))}handleError(e,t){(0,d.NF)(this.platformId)&&/Loading chunk [\d]+ failed/.test(e.message)&&window.location.reload();let r="";return 400===e.status&&20===e.error.data.error_code||0===e.status?this.sharedService.failedSnackBarResponse(this.errorMsg):401===e.status?this.rootService.refreshToken2():412===e.status||(500===e.status?this.sharedService.failedSnackBarResponse("Server Error , Please Try Again."):504===e.status?this.sharedService.failedSnackBarResponse("Slow internet connection. Please try again after sometime."):422===e.status||400===e.status?this.sharedService.failedSnackBarResponse(e.error.message):r=e.error instanceof ErrorEvent?`Error: ${e.error.message}`:`Error Code: ${e.status}\nMessage: ${e.message}`),e&&e.error&&e.error.data&&e.error.data.msg&&this.sharedService.failedSnackBarResponse(e.error.message),(0,p._)(r)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(n.F0),i.LFG(m.F),i.LFG(S.i),i.LFG(i.Lbi))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();var b=r(3903),T=r(6136),N=r(90),U=r(3571);function y(e){return()=>e.upgradeVersion()}let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e,bootstrap:[h]}),e.\u0275inj=i.cJS({providers:[b.a,U.p,L,{provide:o.TP,useClass:P,multi:!0},{provide:i.ip1,useFactory:y,deps:[S.i,I.N],multi:!0}],imports:[[s.b2.withServerTransition({appId:"serverApp"}),c,o.JF,F.u5,F.UX,T.PW,N.ZX,l.ef]]}),e})();r(529).N.production&&(0,i.G48)(),document.addEventListener("DOMContentLoaded",()=>{s.q6().bootstrapModule(x).catch(e=>console.error(e))})},306:e=>{"use strict";e.exports={i8:"0.0.48"}},2480:()=>{}},e=>{"use strict";e.O(0,[736],()=>e(e.s=6411)),e.O()}]);